<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin Dashboard - Welcome Akshatha</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 3rem 4rem;
      background: #f7fafc;
      color: #20232a;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    h1, h2 {
      color: #0a3d62;
      font-weight: 700;
      margin-bottom: 1rem;
    }
    h1 {
      font-size: 2.8rem;
      border-bottom: 2px solid #0a3d62;
      padding-bottom: 0.3rem;
    }
    h2 {
      font-size: 1.9rem;
      margin-top: 2.5rem;
    }
    p.description {
      color: #485460;
      font-size: 1.1rem;
      max-width: 820px;
      margin-bottom: 2rem;
    }
    .welcome-message {
      font-size: 1.45rem;
      color: #1e3799;
      margin-bottom: 1rem;
    }
    .stats {
      display: flex;
      gap: 1.8rem;
      margin-bottom: 3rem;
      flex-wrap: wrap;
    }
    .stat-card {
      background-color: #ffffff;
      border-radius: 12px;
      box-shadow: 0 3px 15px rgb(0 0 0 / 0.1);
      padding: 2.2rem 2.5rem;
      flex: 1 1 280px;
      text-align: center;
      transition: box-shadow 0.3s ease;
      user-select: none;
      cursor: default;
    }
    .stat-card:hover {
      box-shadow: 0 8px 28px rgb(0 0 0 / 0.15);
    }
    .stat-value {
      font-size: 3.6rem;
      font-weight: 800;
      color: #0a3d62;
      letter-spacing: 0.04em;
      margin-bottom: 0.25rem;
    }
    .stat-label {
      font-size: 1.05rem;
      font-weight: 600;
      color: #7b8ca1;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 0.6rem;
    }
    .stat-description {
      font-size: 0.94rem;
      color: #57606f;
      line-height: 1.4;
    }
    .info-section {
      max-width: 860px;
      margin: 3rem auto;
      background: #e1e5ea;
      border-left: 6px solid #1e3799;
      padding: 1.3rem 2.5rem;
      border-radius: 8px;
      color: #29487d;
      box-shadow: inset 2px 2px 5px rgb(255 255 255 / 0.6),
                  inset -2px -2px 5px rgb(0 0 0 / 0.1);
      font-weight: 600;
      line-height: 1.5;
    }
    .charts-container {
      display: flex;
      gap: 2.4rem;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 3rem;
    }
    canvas {
      background: white;
      border-radius: 16px;
      box-shadow: 0 7px 25px rgb(0 0 0 / 0.12);
      flex: 1 1 42%;
      max-width: 720px;
      height: 430px !important;
      padding: 0.8rem;
      user-select: none;
    }
    @media (max-width: 920px) {
      body {
        margin: 1.8rem 1.5rem;
      }
      .charts-container {
        flex-direction: column;
        align-items: center;
      }
      canvas {
        max-width: 100%;
        height: 360px !important;
      }
      h1 {
        font-size: 2rem;
      }
      h2 {
        font-size: 1.5rem;
      }
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

  <h1>Admin Dashboard</h1>
  <p class="welcome-message">Welcome, Akshatha ðŸ‘‹</p>
  <p class="description">
    Here are the latest insights and statistics about users, workers, and bookings to help you monitor the platformâ€™s growth and performance.
  </p>

  <section aria-label="Summary statistics">
    <div class="stats">
      <div class="stat-card" tabindex="0" role="region" aria-labelledby="users-label">
        <div class="stat-value">{{ total_users }}</div>
        <div class="stat-label" id="users-label">Registered Users</div>
        <p class="stat-description">Total number of users registered on your platform.</p>
      </div>
      <div class="stat-card" tabindex="0" role="region" aria-labelledby="workers-label">
        <div class="stat-value">{{ total_workers }}</div>
        <div class="stat-label" id="workers-label">Verified Workers</div>
        <p class="stat-description">Workers approved and ready to provide services.</p>
      </div>
      <div class="stat-card" tabindex="0" role="region" aria-labelledby="bookings-label">
        <div class="stat-value">{{ total_bookings }}</div>
        <div class="stat-label" id="bookings-label">Total Bookings</div>
        <p class="stat-description">Total bookings made by users for various services.</p>
      </div>
    </div>
  </section>

  <section class="info-section" aria-label="Dashboard Insight">
    <h2>Insight</h2>
    <p>
      Recent registrations show steady growth over the past week. Keep engaging your workforce and users to maintain and accelerate this momentum.
      Tracking booking completions will further guide improvements and customer satisfaction.
    </p>
  </section>

  <section aria-labelledby="growth-charts-title">
    <h2 id="growth-charts-title" style="color:#1e3799;">User & Worker Daily Growth (Last 7 Days)</h2>
    <div class="charts-container" role="region" aria-live="polite" aria-atomic="true">
      <canvas id="user-growth-chart" aria-label="User registrations line chart"></canvas>
      <canvas id="worker-growth-chart" aria-label="Worker registrations line chart"></canvas>
    </div>
  </section>

  <script>
    const userDates = JSON.parse('{{ user_growth_dates_json|escapejs }}');
    const userCounts = JSON.parse('{{ user_growth_counts_json|escapejs }}');
    const workerDates = JSON.parse('{{ worker_growth_dates_json|escapejs }}');
    const workerCounts = JSON.parse('{{ worker_growth_counts_json|escapejs }}');

    const commonOptions = {
      scales: {
        y: { beginAtZero: true, precision: 0, grid: { color: '#dfe4ea' } },
        x: { grid: { color: '#dfe4ea' } },
      },
      responsive: true,
      plugins: {
        legend: {
          display: true,
          labels: { font: { size: 16, weight: '700' }, color: '#1e3799' },
        },
        tooltip: {
          backgroundColor: '#1e3799',
          titleFont: { size: 17, weight: '700' },
          bodyFont: { size: 15 },
          cornerRadius: 6,
        },
      },
      animation: { duration: 1400, easing: 'easeOutQuart' },
      interaction: { mode: 'nearest', intersect: false },
    };

    new Chart(document.getElementById('user-growth-chart').getContext('2d'), {
      type: 'line',
      data: {
        labels: userDates,
        datasets: [{
          label: 'New Users',
          data: userCounts,
          borderColor: '#1e3799',
          backgroundColor: 'rgba(30, 55, 153, 0.3)',
          fill: true,
          tension: 0.3,
          pointRadius: 7,
          pointBackgroundColor: '#2f3efb',
          borderWidth: 4,
        }],
      },
      options: commonOptions,
    });

    new Chart(document.getElementById('worker-growth-chart').getContext('2d'), {
      type: 'line',
      data: {
        labels: workerDates,
        datasets: [{
          label: 'New Workers',
          data: workerCounts,
          borderColor: '#57606f',
          backgroundColor: 'rgba(87, 96, 111, 0.3)',
          fill: true,
          tension: 0.3,
          pointRadius: 7,
          pointBackgroundColor: '#8395a7',
          borderWidth: 4,
        }],
      },
      options: commonOptions,
    });
  </script>

</body>
</html>
